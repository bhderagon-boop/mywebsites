<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>پنل مدیریت بازی‌ها</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>پنل مدیریت بازی‌ها</h2>

  <label>نام بازی: <input type="text" id="gameName"></label><br>
  <button onclick="saveGame()">ذخیره بازی</button>

  <script>
    let db;
    let request = indexedDB.open("GamesDB", 3); // نسخه ثابت

    request.onupgradeneeded = function(e) {
      db = e.target.result;
      if (!db.objectStoreNames.contains("games")) {
        db.createObjectStore("games", { keyPath: "id", autoIncrement: true });
      }
    };

    request.onsuccess = function(e) {
      db = e.target.result;
    };

    request.onerror = function(e) {
      console.error("خطا در باز کردن دیتابیس:", e.target.error);
    };

    function saveGame() {
      let name = document.getElementById("gameName").value;

      if (!name) {
        alert("لطفاً نام بازی را وارد کنید");
        return;
      }

      let transaction = db.transaction(["games"], "readwrite");
      let store = transaction.objectStore("games");
      store.add({ name: name });

      transaction.oncomplete = function() {
        alert("✅ بازی ذخیره شد");
      };

      transaction.onerror = function(e) {
        console.error("خطا در ذخیره:", e.target.error);
      };
    }
  </script>
</body>
</html>
