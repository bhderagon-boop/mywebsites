<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>لیست بازی‌ها</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>لیست بازی‌ها</h2>
  <ul id="games-list"></ul>

  <script>
    let db;
    let request = indexedDB.open("GamesDB", 1);

    request.onsuccess = function(e) {
      db = e.target.result;
      loadGames();
    };

    function loadGames() {
      let list = document.getElementById("games-list");
      list.innerHTML = "";

      let transaction = db.transaction(["games"], "readonly");
      let store = transaction.objectStore("games");
      let request = store.openCursor();

      request.onsuccess = function(e) {
        let cursor = e.target.result;
        if (cursor) {
          let li = document.createElement("li");
          // اگر فقط نام و امتیاز ذخیره کردی
          if (cursor.value.score !== undefined) {
            li.textContent = cursor.value.name + " - امتیاز: " + cursor.value.score;
          }
          // اگر فایل ذخیره کردی
          if (cursor.value.fileData) {
            li.textContent = cursor.value.name;
            if (cursor.value.fileData.startsWith("data:image")) {
              let img = document.createElement("img");
              img.src = cursor.value.fileData;
              img.style.maxWidth = "100px";
              li.appendChild(img);
            }
          }
          list.appendChild(li);
          cursor.continue();
        }
      };
    }
  </script>
</body>
</html>

